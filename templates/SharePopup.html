<div class="popup" style="display: none;">
	<div class="mask" data-bind="click: cancelPopup"></div>
	<div class="popup_panel">
		<span class="close" data-bind="click: cancelPopup"></span>

		<div class="fields">
			<div class="fieldset">
				<div class="row">
					<span class="label" data-bind="i18n: {'key': '%MODULENAME%/LABEL_PUBLIC_LINK'}"></span>
					<input readonly="readonly" spellcheck="false" class="value input" type="text" maxlength="255" data-bind="hasfocus: publicLinkFocus, value: publicLink, click: function () {$element.select();}" />
				</div>
				<div class="row" data-bind="visible: password()">
					<span class="label" data-bind="i18n: {'key': 'COREWEBCLIENT/LABEL_PASSWORD'}"></span>
					<input readonly="readonly" spellcheck="false" class="value input" type="text" maxlength="255" data-bind="value: password, click: function () {$element.select();}" />
				</div>
				<div class="row">
					<span class="label" data-bind="i18n: {'key': '%MODULENAME%/LABEL_RECIPIENT'}"></span>
					<input id="select_recipient_input" class="value input" spellcheck="false" type="text" autocomplete="on"
						data-bind="value: recipientAutocomplete,
						valueUpdate: ['blur', 'afterkeydown'],
						autocompleteSimple: {callback: autocompleteCallback.bind($data), dataAccessor: recipientAutocompleteItem}
					" />
				</div>
				<div class="row" data-bind="style: {'visibility': recipientAutocompleteItem() ? 'visible' : 'hidden'}">
					<span class="hint" data-bind="text: recipientAutocompleteItem() ? sendLinkHintText() : '&nbsp;' "></span>
				</div>
				<div class="row">
					<div style="white-space: nowrap;" data-bind="css: {'disabled': !isSigningAvailable()}">
						<label data-bind="css: {'checked': sign}, enable: isSigningAvailable()" class="custom_checkbox checked">
							<span class="icon"></span>
							<input type="checkbox" data-bind="checked: sign, enable: isSigningAvailable()" id="openpgp-sign" />
						</label>
						<input name="fake_input_for_autocomplete" type="text" class="value input" style="display: none;" />
						<label data-bind="i18n: {'key': '%MODULENAME%/LABEL_SIGN'}" for="openpgp-sign"></label>
						<span class="label pgp_password" 
							data-bind="i18n: {'key': 'COREWEBCLIENT/LABEL_PASSWORD'},
							style: { 'width': '100px', 'margin-left': '0'}">
						</span>
						<input autocomplete="new-password" type="password" class="value input" 
							data-bind="value: passphrase,
								style: { 'width': '200px'},
								enable: sign() && isSigningAvailable()" />
					</div>
				</div>
			</div>
			<div class="buttons">
				<span class="button remove" data-bind="click: recipientAutocompleteItem() ? sendEmail : false, css: {'disabled': !recipientAutocompleteItem()}">
					<span data-bind="i18n: {'key':  '%MODULENAME%/ACTION_SEND_EMAIL'}, visible: !isEmailEncryptionAvailable()"></span>
					<span data-bind="i18n: {'key':  '%MODULENAME%/ACTION_SEND_ENCRYPTED_EMAIL'}, visible: isEmailEncryptionAvailable()"></span>
				</span>
				<span class="button remove" data-bind="click: isRemovingPublicLink() ? false: onCancelSharingClick, css: {'disabled': isRemovingPublicLink()}">
					<span data-bind="i18n: {'key':  '%MODULENAME%/ACTION_REMOVE_PUBLIC_LINK'}, visible: !isRemovingPublicLink()"></span>
					<span data-bind="i18n: {'key':  '%MODULENAME%/ACTION_REMOVE_PUBLIC_LINK_IN_PROGRESS'}, visible: isRemovingPublicLink()"></span>
				</span>
				<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CLOSE'}, click: cancelPopup"></span>
			</div>
		</div>
	</div>
	<span class="helper"></span>
</div>
